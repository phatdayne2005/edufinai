spring:
  application:
    name: ai-service

  codec:
    charset: UTF-8
  
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: UTC

  datasource:
    url: jdbc:mysql://localhost:3306/ai_service
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        format_sql: false
        jdbc.time_zone: UTC
    open-in-view: false

  sql:
    init:
      mode: always
      platform: mysql

logging:
  level:
    root: INFO
    org.springframework.web.reactive.function.client: WARN
    reactor.netty.http.client: WARN
    com.xdpm.service5.ai_service: INFO
    org.springframework.web: INFO
    org.springframework.web.reactive: INFO
    org.springframework.web.HttpLogging: WARN
  file:
    name: logs/ai-service.log
    max-size: 10MB
    max-history: 30
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

edufinai:
  http:
    maxInMemorySizeBytes: 16777216
    connectTimeoutMs: 3000
    responseTimeoutMs: 10000
  gemini:
    timeoutSeconds: 60
  scheduler:
    daily:
      cron: "0 0 0 * * *" # 02:15 hàng ngày
  cors:
    allowedOrigins: http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000

server:
  port: 9001

eureka:
  client:
    service-url:
      default-zone: http://localhost:8761/eureka

# Khai báo downstream services (đặt URL HTTP đầy đủ tới endpoint summary phù hợp của từng service)
services:
  transaction:
    url: http://localhost:8081/api/summary/daily
  userprofile:
    url: http://localhost:8082/api/summary/daily
  goals:
    url: http://localhost:8083/api/summary/daily
  learning:
    url: http://localhost:8084/api/summary/daily

gemini:
  apiUrl: https://generativelanguage.googleapis.com/v1beta
  apiKey: ${GEMINI_API_KEY:}
  model: gemini-2.5-flash  # Changed from gemini-2.5-pro (was returning 503)


jwt:
  secret: '1TjXchw5FloESb63Kc+DFhTARvpWL4jUGCwfGWxuG5SIf/1y/LgJxHnMqaF6A/ij'
